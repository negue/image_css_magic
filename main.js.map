{"version":3,"sources":["./src/app/auto-scale/auto-scale.component.ts","./src/app/auto-scale/auto-scale.component.html","./src/environments/environment.ts","./src/app/array-sort-pipe.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/auto-scale/value-or-default.pipe.ts","./src/app/app.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Component, HostBinding, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-auto-scale',\n  templateUrl: './auto-scale.component.html',\n  styleUrls: ['./auto-scale.component.scss']\n})\nexport class AutoScaleComponent implements OnInit {\n\n  @HostBinding('style.--zoom_out_width.px')\n  @Input()\n  width: number = 100;\n\n  @HostBinding('style.--zoom_out_height.px')\n  @Input()\n  height: number = 100;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"zoom_out_parent\">\n  <div class=\"zoom_out\" #zoomOutElement\n   [style.--scale-width]=\"(width / zoomOutElement.scrollWidth)| valueOrDefault: 1\"\n         [style.--scale-height]=\"(height / zoomOutElement.scrollHeight) |valueOrDefault: 1\"\n  >\n    <ng-content></ng-content>\n  </div>\n</div>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: \"sort\"\n})\nexport class ArraySortPipe  implements PipeTransform {\n  transform(array: any[], field: string): any[] {\n    if (!Array.isArray(array)) {\n      return array;\n    }\n    const newArray = [...array];\n    newArray.sort((a: any, b: any) => {\n      if (a[field] < b[field]) {\n        return -1;\n      } else if (a[field] > b[field]) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n    return newArray;\n  }\n}\n","import {\n  ChangeDetectionStrategy, ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  TrackByFunction,\n  ViewChild\n} from '@angular/core';\nimport { BehaviorSubject, combineLatest, Subject } from 'rxjs';\nimport { debounceTime, map, takeUntil } from 'rxjs/operators';\nimport { ArraySortPipe } from './array-sort-pipe';\nimport { toPng } from 'html-to-image';\nimport * as localforage from 'localforage';\n\ninterface CssFilterEntry {\n  order: number;\n  type: string;\n  value: string;\n  enabled: boolean;\n}\n\ninterface OptionsState {\n  useMask: boolean;\n  opacity: number;\n\n  useCustomCssBelowImage: boolean;\n  customCssBelowImage: string;\n\n  useCustomCssAboveImage: boolean;\n  customCssAboveImage: string;\n}\n\nconst DEFAULT_OPTIONS_STATE: OptionsState = {\n  useMask: true,\n  opacity: 50,\n  useCustomCssBelowImage: false,\n  useCustomCssAboveImage: false,\n  customCssBelowImage: '  background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red);',\n  customCssAboveImage: '  background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red);',\n};\n\nfunction createDefaultCssFilters(): CssFilterEntry[] {\n  let order = 0;\n  const enabled = false;\n\n  return [\n    {\n      type: 'hue-rotate',\n      value: '90deg',\n      order: order++,\n      enabled\n    },\n    {\n      type: 'grayscale',\n      value: '70%',\n      order: order++,\n      enabled\n    },\n    {\n      type: 'blur',\n      value: '5px',\n      order: order++,\n      enabled\n    },\n    {\n      type: 'brightness',\n      value: '2',\n      order: order++,\n      enabled\n    },\n    {\n      type: 'contrast',\n      value: '200%',\n      order: order++,\n      enabled\n    },\n    {\n      type: 'drop-shadow',\n      value: '16px 16px 10px black',\n      order: order++,\n      enabled\n    },\n    {\n      type: 'invert',\n      value: '100%',\n      order: order++,\n      enabled\n    },\n\n    {\n      type: 'saturate',\n      value: '100%',\n      order: order++,\n      enabled\n    },\n\n    {\n      type: 'sepia',\n      value: '100%',\n      order: order++,\n      enabled\n    }\n  ];\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  private cssFilterSubject$ = new BehaviorSubject<CssFilterEntry[]>([]);\n  private updateOtherOptionsSubject$ = new BehaviorSubject(null);\n  // tslint:disable-next-line:variable-name\n  private _destroy$ = new Subject();\n\n  title = 'image-css-magic';\n\n  cssFilterArray$ =  this.cssFilterSubject$.asObservable().pipe(\n    map(entries => this.arraySortingPipe.transform(entries, 'order'))\n  );\n\n  cssFilterString$ = this.cssFilterArray$.pipe(\n    map(value => {\n      const enabledFilters = value.filter(e => e.enabled);\n\n      return enabledFilters.map(e => `${e.type}(${e.value})`).join(' ');\n    })\n  );\n\n  @ViewChild('targetImage')\n  image: ElementRef<HTMLImageElement> | null = null;\n\n\n  @ViewChild('canvasElement')\n  canvas: ElementRef<HTMLCanvasElement> | null = null;\n\n\n  @ViewChild('holdingElement')\n  holding: ElementRef<HTMLDivElement> | null = null;\n\n  public imagePath = '';\n\n  public optionsState: OptionsState = DEFAULT_OPTIONS_STATE;\n\n  private fr = new FileReader();\n\n  constructor(private arraySortingPipe: ArraySortPipe,\n              private cd: ChangeDetectorRef) {\n    this.cssFilterSubject$.next(createDefaultCssFilters());\n\n    this.fr.onload = (e) => {\n      if (!this.image) {\n        return;\n      }\n\n      if (typeof this.fr.result === 'string') {\n        this.imagePath = this.fr.result;\n        this.cd.detectChanges();\n\n        setTimeout(() => {\n          this.cd.detectChanges();\n          this.updateOtherOptionsSubject$.next(null);\n        }, 120)\n\n\n        localforage.setItem('current_image', this.imagePath);\n      } else {\n        alert('WAT');\n      }\n    };\n\n    combineLatest([\n      this.cssFilterSubject$,\n      this.updateOtherOptionsSubject$\n    ]).pipe(\n      takeUntil(this._destroy$),\n      debounceTime(2500)\n    ).subscribe(() => {\n      if (!this.holding?.nativeElement){\n        return;\n      }\n\n      localforage.setItem('options_state', this.optionsState);\n      localforage.setItem('css_filters', this.cssFilterSubject$.value);\n\n      toPng(this.holding?.nativeElement).then(dataPath => {\n\n        var img = new Image();\n        img.src = dataPath;\n\n        img.onload = () => {\n          const canvas = this.canvas?.nativeElement;\n          const ctx = canvas?.getContext('2d');\n          if (ctx) {\n            ctx.clearRect(0, 0, canvas?.width ?? 0, canvas?.height ?? 0);\n            ctx.drawImage(img, 0, 0);\n            this.cd.detectChanges();\n          }\n        };\n      } );\n    });\n  }\n\n  trackByFilter: TrackByFunction<CssFilterEntry> = (index, item) => item.type;\n\n  displaySelectedImage(inputElement: HTMLInputElement): void {\n    const gotAFile = inputElement.files?.[0];\n\n    if (gotAFile) {\n      this.fr.readAsDataURL(gotAFile);\n    }\n  }\n\n  updateList(): void {\n    this.cssFilterSubject$.next([...this.cssFilterSubject$.value]);\n  }\n\n  updateOtherOptions(): void {\n    this.updateOtherOptionsSubject$.next(null);\n  }\n\n  ngOnDestroy(): void {\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n\n  downloadToImage(canvasElement: HTMLCanvasElement): void {\n    var link = document.createElement('a');\n    link.download = 'filename.png';\n    link.href = canvasElement.toDataURL();\n    link.click();\n  }\n\n  async ngOnInit(): Promise<void> {\n    const lastImage = await localforage.getItem<string>('current_image') ?? '';\n\n    this.imagePath = lastImage;\n\n    this.optionsState = await localforage.getItem('options_state') ?? DEFAULT_OPTIONS_STATE;\n\n    const savedCssFilters = await localforage.getItem<CssFilterEntry[]>('css_filters') ?? createDefaultCssFilters();\n\n    this.cssFilterSubject$.next(savedCssFilters);\n  }\n}\n","<div class=\"sticky_top columns\">\n  <div class=\"column flex_center\">\n    <input id=\"src\" type=\"file\" (change)=\"displaySelectedImage(inputElement)\" #inputElement/>\n\n    <br>\n\n    <app-auto-scale [width]=\"300\" [height]=\"200\"\n    >\n      <div class=\"holding_parent\"\n           [style.filter]=\"cssFilterString$|async\" #holdingElement>\n        <div class=\"absolute\"\n             [style.opacity.%]=\"optionsState.opacity\"\n             [style]=\"optionsState.useCustomCssAboveImage ? optionsState.customCssAboveImage : null\"\n             [style.mask-image]=\"optionsState.useMask ? 'url('+imagePath+')' : null\"\n             [style.-webkit-mask-image]=\"optionsState.useMask ? 'url('+imagePath+')' : null\">\n\n        </div>\n\n        <img #targetImage [src]=\"imagePath\"/>\n\n        <div class=\"absolute\"\n             style=\"z-index: -1;\"\n             [style]=\"optionsState.useCustomCssBelowImage ? optionsState.customCssBelowImage : null\">\n\n        </div>\n\n      </div>\n    </app-auto-scale>\n  </div>\n\n  <div class=\"column flex_center\">\n    <h3>Created Image Preview</h3>\n        <app-auto-scale [width]=\"300\" [height]=\"200\">\n\n      <canvas #canvasElement class=\"zoom_out\"\n              [width]=\"targetImage.width\"\n              [height]=\"targetImage.height\"></canvas>\n        </app-auto-scale>\n    <button mat-raised-button color=\"accent\"\n            (click)=\"downloadToImage(canvasElement)\">\n      download\n    </button>\n  </div>\n\n</div>\n\n<div class=\"columns\">\n  <div class=\"column\">\n\n    <ng-container *ngIf=\"cssFilterArray$| async as filterArray\">\n      <div *ngFor=\"let cssFilterEntry of filterArray; trackBy: trackByFilter\"\n      >\n        <mat-checkbox [(ngModel)]=\"cssFilterEntry.enabled\"\n                      (change)=\"updateList()\">\n          {{cssFilterEntry.type}}\n        </mat-checkbox>\n\n        <br>\n\n        <mat-form-field appearance=\"outline\">\n          <mat-label>Value</mat-label>\n          <input type=\"text\" matInput\n                 [(ngModel)]=\"cssFilterEntry.value\"\n                 (change)=\"updateList()\">\n        </mat-form-field>\n\n\n        <mat-form-field appearance=\"outline\">\n          <mat-label>Order</mat-label>\n          <input type=\"number\" matInput\n                 [(ngModel)]=\"cssFilterEntry.order\"\n                 (change)=\"updateList()\">\n        </mat-form-field>\n      </div>\n    </ng-container>\n  </div>\n  <div class=\"column flex_rows\">\n    <h3>Custom CSS Above the Image</h3>\n\n    <mat-checkbox [(ngModel)]=\"optionsState.useMask\" (change)=\"updateOtherOptions()\">\n      Use the source image as mask\n    </mat-checkbox>\n    <mat-form-field appearance=\"outline\">\n      <mat-label>Opacity</mat-label>\n      <input type=\"number\" matInput [max]=\"100\" [min]=\"0\"\n             (change)=\"updateOtherOptions()\"\n             [(ngModel)]=\"optionsState.opacity\">\n    </mat-form-field>\n\n    <mat-checkbox [(ngModel)]=\"optionsState.useCustomCssAboveImage\"\n                  (change)=\"updateOtherOptions()\">\n      Use custom CSS above the image\n    </mat-checkbox>\n    <mat-form-field appearance=\"outline\">\n      <mat-label>Custom CSS above the image</mat-label>\n      <textarea matInput style=\"min-height: 6rem\"\n                (change)=\"updateOtherOptions()\"\n                [(ngModel)]=\"optionsState.customCssAboveImage\">\n\n    </textarea>\n    </mat-form-field>\n\n\n    <h3>Custom CSS Below the Image</h3>\n\n\n    <mat-checkbox [(ngModel)]=\"optionsState.useCustomCssBelowImage\"\n                  (change)=\"updateOtherOptions()\">\n      Use custom CSS below the image\n    </mat-checkbox>\n    <mat-form-field appearance=\"outline\">\n      <mat-label>Custom CSS below the image</mat-label>\n      <textarea matInput style=\"min-height: 6rem\"\n                (change)=\"updateOtherOptions()\"\n                [(ngModel)]=\"optionsState.customCssBelowImage\">\n\n    </textarea>\n    </mat-form-field>\n  </div>\n</div>\n\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'valueOrDefault'\n})\nexport class ValueOrDefaultPipe implements PipeTransform {\n\n  transform(value: number, defaultValue: number): number {\n    if (!isFinite(value)) {\n      return defaultValue;\n    }\n    return value;\n  }\n\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport {ArraySortPipe} from './array-sort-pipe';\nimport {FormsModule} from '@angular/forms';\nimport {MatCheckboxModule} from '@angular/material/checkbox';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatInputModule} from '@angular/material/input';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport { AutoScaleComponent } from './auto-scale/auto-scale.component';\nimport { ValueOrDefaultPipe } from './auto-scale/value-or-default.pipe';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ArraySortPipe,\n    AutoScaleComponent,\n    ValueOrDefaultPipe\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    MatCheckboxModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatInputModule,\n    BrowserAnimationsModule\n  ],\n  providers: [ArraySortPipe],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}